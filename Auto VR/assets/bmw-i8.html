<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>360&deg; Image</title>
    <meta name="description" content="360&deg; Image - A-Frame">
    <script src="../js/aframe-master.js"></script>
    <style type="text/css">
.hello {
    position: fixed;
    z-index: 5999;
    top: 20px;
    left: 20px;
    color: #fff;
}

.yay {
    position: relative;
    z-index: 5999;
   
    color: #fff;
}
	</style>


    
  </head>
  <body>
  
    
      <a-scene>
      <a-assets>
        <a-mixin id="planet" geometry="primitive: sphere; radius: 1"></a-mixin>
        <a-mixin id="orbit" attribute="rotation" to="0 360 0"
                  repeat="indefinite" easing="linear" dur="9000"></a-mixin>
        <a-mixin id="spin" attribute="rotation" to="0 360 0"
                  repeat="indefinite" easing="linear" dur="3000"></a-mixin>
        <a-mixin id="img1" geometry="primitive: plane;"></a-mixin>
        
        <a-mixin id="cube" geometry="primitive: box"></a-mixin>
        <a-mixin id="cube-hovered" material="color: #CC435F; opacity: 0.2;"></a-mixin>
        <a-mixin id="cube-selected" material="color: #876A96; opacity: 0.2;"></a-mixin>   
        <a-mixin id="green" material="color: #9DE0AD; opacity: 0.5;"></a-mixin>
         
         <audio id="blip1" src="../videos/321103__nsstudios__blip1.wav"></audio>
         <audio id="blip2" src="../videos/321104__nsstudios__blip2.wav"></audio>       
         <audio id="shot" src="shot.ogg"></audio>
                  
          <img id="grid" src="../videos/grid-plain2.jpg">      
          <img id="i8exterior1" src="../videos/XL_022_IB_i8.jpg">
          <img id="bmw" src="../videos/bmw-i8-ac627ab1-hd.jpg">
          <img id="icon2" src="../videos/icon2-bmw.png">
          <img id="logoBall" src="../videos/bmw-logo-I8.png">
          <img id="icon3" src="../videos/icon3-bmw.png">
          <img id="infopanel" src="../videos/info-panel.png">
          <img id="steer" src="../videos/steering-wheel.png">
               
                           
               <video id="signalloop" preload="auto" src="../videos/signal-loop.mp4"
              autoplay muted loop crossorigin></video>
              
              <video id="conceptui" preload="auto" src="../videos/i8-concept-ui.mp4"
              autoplay muted loop crossorigin></video>
              
              <video id="centerinfo1" preload="auto" src="../videos/centerinfo-concept.mp4"
              autoplay muted loop crossorigin></video>
              
              <video id="instrument1" preload="auto" src="../videos/instrument-concept.mp4"
              autoplay muted loop crossorigin></video>
              
              <video id="instninfo1" preload="auto" src="../videos/instninfo-concept.mp4"
              autoplay muted loop crossorigin></video>
              
             
      </a-assets>
      
      
      
       <!--video-->
     <a-entity id="videoScreen" material=" src: #centerinfo1; opacity: 1.0; transparent: true" class="intersectable clickable"
                geometry="primitive: plane; width: 56; height: 22;"
                position="34 -51 -200"
                rotation="0 -8 -2">
               <!-- sound__1="on: click; src: #blip1;"-->
              <!--     sound__2="on: mouseenter; src: #blip2;"-->
         
      </a-entity>
      
      <a-entity id="videoScreenDash" material=" src: #instrument1; opacity: 1.0; transparent: true" class="intersectable clickable" geometry="primitive: plane; width: 72; height: 28;" position="150 -78 -168" rotation="0 -35 0" scale="" visible="">
               <!-- sound__1="on: click; src: #blip1;"-->
              <!--     sound__2="on: mouseenter; src: #blip2;"-->
         
      </a-entity>
      
      <a-entity id="videoScreenLeft" material=" src: #instninfo1; opacity: 0.2; transparent: true" class="intersectable clickable" geometry="primitive: plane; width: 185; height: 36;" position="-180 -120 -140" rotation="0 45 2" scale="" visible="">
               <!-- sound__1="on: click; src: #blip1;"-->
              <!--     sound__2="on: mouseenter; src: #blip2;"-->
         
      </a-entity>
      

     <!-- origi camera  <a-entity position="0 0 6">
        <a-camera wasd-controls-enabled="false" user-height="1"></a-camera>
      </a-entity> -->
      
      
      <!-- cursor //pos old //0 .6 4//-->
      
      <a-entity position="0 0 6">
        <a-camera>
          <a-entity raycaster="far: 30; objects: .intersectable"
                    cursor
                    geometry="primitive: ring; radiusOuter: 0.015;
                              radiusInner: 0.01; segmentsTheta: 32"
                    material="color: #4596bd; shader: flat"
                    position="0 0 -0.75"></a-entity>
        </a-camera>
      </a-entity>
      
      <!-- end cur -->
      
      <!-- cubes -->
      
      <a-entity position="0 1 0">
        <a-entity id="foregroundCube"
                  class="intersectable"
                  mixin="green cube"
                  sound__1="on: click; src: #blip1;"
                  sound__2="on: mouseenter; src: #blip2;">
          <a-animation begin="click" attribute="rotation" to="0 360 0" 
                       easing="linear" dur="2000" fill="backwards"></a-animation>
        </a-entity>
      </a-entity>
      
      
    <!--  <a-entity position="4.1 -1.9 1.2">-->
      <!--   <a-entity id="steeringCube"
                  class="intersectable"
                  mixin="green cube"
                  sound__1="on: click; src: #blip1;"
                  sound__2="on: mouseenter; src: #blip2;">
          <a-animation begin="click" attribute="rotation" to="-23 -40 50.2"
                       easing="linear" dur="1000" fill="backwards"></a-animation>-->
     <!--    </a-entity>
      </a-entity> -->
      
      <!-- end cubes -->
      

  <!-- balls. 
      <a-entity rotation="0 0 0" position="0 -2 4.2">
        
        <a-entity light="type: point; intensity: 2"></a-entity>
        <a-entity light="type: ambient; color: #888"></a-entity>

      

        <a-entity position="0 0 0">
          <a-animation mixin="orbit" dur="10000"></a-animation>
          <a-entity mixin="planet" material=" shader: flat; src: #logoBall; opacity: 0.9; transparent: false" position="-6 2 -1"
                    geometry="radius: 1"  >
                    <a-animation mixin="spin"></a-animation>
                    </a-entity>
                    
        </a-entity>

        <a-entity position="0 0 0">
          <a-animation mixin="orbit" dur="10000"></a-animation>
          <a-entity mixin="planet" material=" shader: flat; src: #logoBall; opacity: 0.9; transparent: false"
                     position="3.8 2 4" geometry="radius: 1"  ><a-animation mixin="spin"></a-animation>
                    </a-entity>
        </a-entity>
        
        <a-entity position="0 0 0">
          <a-animation mixin="orbit" dur="10000"></a-animation>
          <a-entity mixin="planet" material=" shader: flat; src: #logoBall; opacity: 0.9; transparent: false"
                     position="0 2 6.0" geometry="radius: 1" ><a-animation mixin="spin"></a-animation>
                    </a-entity>
          </a-entity>
          
        <a-entity position="0 0 0">
          <a-animation mixin="orbit" dur="10000"></a-animation>
          <a-entity mixin="planet" material=" shader: flat; src: #signalloop; opacity: 0.9; transparent: false"
                     position="-3.8 2 4" geometry="radius: 1" ><a-animation mixin="spin"></a-animation>
                    </a-entity>
            <a-animation attribute="geometry.p" direction="alternate" fill="forwards"
                         ease="linear"
                         repeat="indefinite" to="4"></a-animation>
            <a-animation attribute="geometry.q" direction="alternate" fill="forwards"
                         ease="linear"
                         repeat="indefinite" to="7"></a-animation>
          </a-entity>
        </a-entity>
      </a-entity>
      balls-->
      
      <!--curved imgs 
      
       <a-curvedimage src="#ui3" radius="5.7" theta-length="180" height="9"
                     rotation="0 90 0" scale="1.2 1.2 1.2"></a-curvedimage>
      <a-curvedimage src="#mozvr" radius="5.7" theta-length="17" height=".36"
                     opacity="0.2" rotation="0 250 0" position="0 2 0"></a-curvedimage>-->
      <a-curvedimage src="#infopanel" radius="6.7" theta-length="130" height="3.7"
       rotation="0 -15 0" position="2 1 5.5" scale="0.6 0.6 0.6" visible="" material="" geometry=""></a-curvedimage>
      <a-curvedimage src="#instninfo1" radius="5.7" opacity="0.8" theta-length="100" height="3.02"
                     rotation="0 130 0" position="1 3 -8" scale="1 1 1"></a-curvedimage>
      
      
      <!-- curved end -->
      
      <a-sky src="#bmw" rotation="0 -130 0"></a-sky>
      
      <a-entity position="1.6 -0.2 4.2" rotation="0 -40 3">
     <a-entity id="txt1" class="intersectable clickable"
                text="font: roboto; align: center; width: 3.0; color: white; value: POINTER VR">
      </a-entity> 
      </a-entity> 
      
      <a-entity position="0.5 0 0" rotation="0 180 0">
     <a-entity id="txt2" class="intersectable clickable"
                text="font: roboto; align: center; width: 7.0; color: white; value: [ 2. POINTER HERE TO START VR &trade; ]">
      </a-entity> 
      </a-entity> 
      
     <!-- <a-entity position="4.1 -1.9 1.2" rotation="-23 -40 2.2" scale="0.081 0.081 0.081" >
        <a-image width="71" height="78"  src="#steer"></a-image>
          
        </a-entity> -->
        
        <a-entity id="steeringCube" position="4.1 -1.9 1.2" rotation="-23 -40 2.2" scale="0.081 0.081 0.081"
                  class="intersectable"
                  mixin="green cube"
                  sound__1="on: click; src: #blip1;"
                  sound__2="on: mouseenter; src: #blip2;">
                  <a-image width="71" height="78"  src="#steer"></a-image>
          <a-animation begin="click" attribute="rotation" to="-23 -40 50.2"
                       easing="linear" dur="1000" fill="backwards"></a-animation>
                       
          <!--<a-animation begin="click" attribute="rotation" to="-23 -40 -20.2"
                       easing="linear" dur="1000" fill="backwards"></a-animation>-->
         </a-entity>
      
      <!-- image floor -->
    <!--<a-entity position="0 1.5 -5" rotation="0 0 0" scale="0.05 0.05 0.05">-->
    <a-entity position="0.3 -5.2 5.5" rotation="90 0 0" scale="0.04 0.04 0.04" >
        <a-image width="100" height="100"  src="#icon3"></a-image>
          
        </a-entity>
    </a-scene>
<script>
var scene = document.querySelector('a-scene');
scene.addEventListener('dblclick', function () {
 // conceptui.play();
  //videoScreen.play();
  //textval.setAttribute('text', 'align: center; width: 3.5; color: white; value: [ STARTING..]');
window.open("curved-vid.html", "_self");
 //signalloop.play();
});
  centerinfo1.play();
  instrument1.play();
  instninfo1.play();
  videoScreen.play();
  videoScreenDash.play();
  videoScreenLeft.play();

</script>

 <script>
      (function () {
        // Custom states.
        var clickedEl = null;
        var els = document.querySelectorAll('a-entity');
        Array.prototype.forEach.call(els, function (el) {
          el.addEventListener('click', function () {
            if (clickedEl && clickedEl !== el) {
              clickedEl.removeState('selected');
            }
            if (!el.classList.contains('clickable')) { return; }
            clickedEl = el;
            clickedEl.addState('selected');
          });
        });

        // Responding to mouse events.
        var cubes = document.querySelectorAll('a-entity[mixin*=cube]');
        var i;
        for (i = 0; i < cubes.length; ++i) {
          cubes[i].addEventListener('click', function () {
            var href = this.getAttribute('href');
            if (!href) { return; }
            window.top.postMessage({type: 'navigate', data: {url: href}}, '*');
          })
        }
		
		
        // foreground cube testing mouseenter and mouseleave
        var foregroundCube = document.querySelector('#foregroundCube');
        foregroundCube.addEventListener('mouseenter', function (evt) {
          foregroundCube.setAttribute('mixin','cube cube-hovered')
        })
        foregroundCube.addEventListener('mouseleave', function (evt) {
          foregroundCube.setAttribute('mixin','green cube')
        })
        foregroundCube.addEventListener('mousedown', function (evt) {
          foregroundCube.setAttribute('mixin','cube cube-selected')
        })
        foregroundCube.addEventListener('mouseup', function (evt) {
          foregroundCube.setAttribute('mixin','cube cube-hovered')
        })
        foregroundCube.addEventListener('click', function (evt) {
          var scene = document.querySelector('a-scene');
          var clickRing = document.createElement('a-entity');
          clickRing.id = 'clickRing-'+new Date().getTime();
          clickRing.setAttribute('material','color: magenta; transparent: true; opacity: 0.6');
          clickRing.setAttribute('geometry','primitive: ring; radius-inner: 0.5; radius-outer: 0.6');
          clickRing.setAttribute('position',evt.detail.intersection.point);
          var opacityAnimation = document.createElement('a-animation');
          opacityAnimation.setAttribute('attribute','material.opacity');
          opacityAnimation.setAttribute('to',0);
          opacityAnimation.setAttribute('duration','250');
          opacityAnimation.setAttribute('easing','ease-out-quad');
          var scaleAnimation = document.createElement('a-animation');
          scaleAnimation.setAttribute('attribute','scale');
          scaleAnimation.setAttribute('to','3 3 3');
          scaleAnimation.setAttribute('duration','250');
          scaleAnimation.setAttribute('easing','ease-out-quad');
          var onAnimationEnd = function () {
            scene.removeChild(document.querySelector('#'+clickRing.id))
          }
          scaleAnimation.addEventListener('animationend', onAnimationEnd.bind(this))
          clickRing.appendChild(opacityAnimation);
          clickRing.appendChild(scaleAnimation);
          scene.appendChild(clickRing);
        })
		
		// testing mouseenter and mouseleave steeringCube 
        var steeringCube = document.querySelector('#steeringCube');
        steeringCube.addEventListener('mouseenter', function (evt) {
          steeringCube.setAttribute('mixin','cube cube-hovered')
        })
        steeringCube.addEventListener('mouseleave', function (evt) {
          steeringCube.setAttribute('mixin','green cube');
		 //steeringCube.setAttribute('rotation','-23 -40 2.2');
		  //ani
		  var rightSteerAnimation = document.createElement('a-animation');
          rightSteerAnimation.setAttribute('attribute','rotation');
          rightSteerAnimation.setAttribute('to','-23 -40 -44.2');
          rightSteerAnimation.setAttribute('duration','1500');
          rightSteerAnimation.setAttribute('easing','linear');
		  rightSteerAnimation.setAttribute('fill','backwards');
		  steeringCube.appendChild(rightSteerAnimation);
		  //ani
        })
        steeringCube.addEventListener('mousedown', function (evt) {
          steeringCube.setAttribute('mixin','cube cube-selected')
        })
        steeringCube.addEventListener('mouseup', function (evt) {
          steeringCube.setAttribute('mixin','cube cube-hovered')
        })
        steeringCube.addEventListener('click', function (evt) {
          var scene = document.querySelector('a-scene');
          var clickRing = document.createElement('a-entity');
          clickRing.id = 'clickRing-'+new Date().getTime();
          clickRing.setAttribute('material','color: magenta; transparent: true; opacity: 0.6');
          clickRing.setAttribute('geometry','primitive: ring; radius-inner: 0.5; radius-outer: 0.6');
          clickRing.setAttribute('position',evt.detail.intersection.point);
		  clickRing.setAttribute('rotation' ,'0 -45 0');
          var opacityAnimation = document.createElement('a-animation');
          opacityAnimation.setAttribute('attribute','material.opacity');
          opacityAnimation.setAttribute('to',0);
          opacityAnimation.setAttribute('duration','250');
          opacityAnimation.setAttribute('easing','ease-out-quad');
          var scaleAnimation = document.createElement('a-animation');
          scaleAnimation.setAttribute('attribute','scale');
          scaleAnimation.setAttribute('to','3 3 3');
          scaleAnimation.setAttribute('duration','250');
          scaleAnimation.setAttribute('easing','ease-out-quad');
          var onAnimationEnd = function () {
            scene.removeChild(document.querySelector('#'+clickRing.id))
          }
          scaleAnimation.addEventListener('animationend', onAnimationEnd.bind(this))
          clickRing.appendChild(opacityAnimation);
          clickRing.appendChild(scaleAnimation);
          scene.appendChild(clickRing);
        })
		// end steering cube
		
		
      })();
    </script>
  </body>
</html>
